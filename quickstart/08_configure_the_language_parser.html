

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-138982267-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-138982267-1');
  </script>

  <title>Step 8: Configure the Language Parser &mdash; The Conversational AI Playbook 4.3.0 documentation</title>
  


  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'4.3.0',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/custom.js"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@1/dist/clipboard.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Step 9: Optimize Question Answering Performance" href="09_optimize_question_answering_performance.html" />
    <link rel="prev" title="Step 7: Train the Natural Language Processing Classifiers" href="07_train_the_natural_language_processing_classifiers.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> The Conversational AI Playbook
          

          
          </a>

          
            
            
              <div class="version">
                4.3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/introduction_to_conversational_applications.html">Introduction to Conversational Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/approaches_for_building_conversational_applications.html">Different Approaches for Building Conversational Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/anatomy_of_a_conversational_ai_interaction.html">Anatomy of a Conversational AI Interaction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/introducing_mindmeld.html">Introducing MindMeld</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/key_concepts.html">Key Concepts</a></li>
</ul>
<p class="caption"><span class="caption-text">Step-by-Step Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="00_overview.html">Building a Conversational Interface in 10 Steps</a></li>
<li class="toctree-l1"><a class="reference internal" href="01_select_the_right_use_case.html">Step 1: Select the Right Use Case</a></li>
<li class="toctree-l1"><a class="reference internal" href="02_script_interactions.html">Step 2: Script Your Ideal Dialogue Interactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="03_define_the_hierarchy.html">Step 3: Define the Domain, Intent, Entity, and Role Hierarchy</a></li>
<li class="toctree-l1"><a class="reference internal" href="04_define_the_dialogue_handlers.html">Step 4: Define the Dialogue State Handlers</a></li>
<li class="toctree-l1"><a class="reference internal" href="05_create_the_knowledge_base.html">Step 5: Create the Knowledge Base</a></li>
<li class="toctree-l1"><a class="reference internal" href="06_generate_representative_training_data.html">Step 6: Generate Representative Training Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="07_train_the_natural_language_processing_classifiers.html">Step 7: Train the Natural Language Processing Classifiers</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Step 8: Configure the Language Parser</a></li>
<li class="toctree-l1"><a class="reference internal" href="09_optimize_question_answering_performance.html">Step 9: Optimize Question Answering Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="10_deploy_to_production.html">Step 10: Deploy Trained Models</a></li>
</ul>
<p class="caption"><span class="caption-text">Blueprint Applications</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../blueprints/overview.html">MindMeld Blueprints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../blueprints/food_ordering.html">Food Ordering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../blueprints/video_discovery.html">Video Discovery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../blueprints/home_assistant.html">Home Assistant</a></li>
<li class="toctree-l1"><a class="reference internal" href="../blueprints/hr_assistant.html">HR Assistant</a></li>
<li class="toctree-l1"><a class="reference internal" href="../blueprints/banking.html">Banking Assistant</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userguide/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/architecture.html">Platform Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/preprocessor.html">Working with the Preprocessor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/nlp.html">Working with the Natural Language Processor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/domain_classifier.html">Working with the Domain Classifier</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/intent_classifier.html">Working with the Intent Classifier</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/entity_recognizer.html">Working with the Entity Recognizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/lstm.html">Using LSTM for Entity Recognition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/role_classifier.html">Working with the Role Classifier</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/entity_resolver.html">Working with the Entity Resolver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/parser.html">Working with the Language Parser</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/custom_features.html">Working with User-Defined Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/kb.html">Working with the Knowledge Base and Question Answerer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/dm.html">Working with the Dialogue Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/custom_action.html">Working with Custom Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/internationalization.html">Internationalization support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/voice.html">Dealing with Voice Inputs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrations/webex_teams.html">Webex Teams Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrations/whatsapp.html">WhatsApp Integration</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../internal/api_reference.html">API Reference</a></li>
</ul>
<p class="caption"><span class="caption-text">MindMeld UI</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mindmeld_ui/mindmeld_ui.html">MindMeld UI</a></li>
</ul>
<p class="caption"><span class="caption-text">Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../versions/changes.html">Recent Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions/history.html">Package History</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The Conversational AI Playbook</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Step 8: Configure the Language Parser</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/quickstart/08_configure_the_language_parser.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="step-8-configure-the-language-parser">
<h1>Step 8: Configure the Language Parser<a class="headerlink" href="#step-8-configure-the-language-parser" title="Permalink to this headline">Â¶</a></h1>
<p>Invoked after the other NLP models have run, the language parser is the final component of the natural language processor. Its job is to find relationships between the extracted entities and group them into a meaningful hierarchy. The parser analyzes the information provided by all the previous NLP models and outputs a data structure called the <em>parse tree</em>, which captures how different entities relate to each other.</p>
<p>Consider the use case where you not only want to check the hours of your local Kwik-E-Mart, but also order items to pick up from the store in advance. To handle this functionality, we could define an entity type called <code class="docutils literal notranslate"><span class="pre">product</span></code> which specifies the name of an item you want to order. We could also define other entities such as <code class="docutils literal notranslate"><span class="pre">size</span></code> and <code class="docutils literal notranslate"><span class="pre">quantity</span></code> which provide more information about the items in your order. The language parser takes these entities, which are detected by the entity recognizer, and <a class="reference external" href="https://en.wikipedia.org/wiki/Parsing">parses</a> them into a representation which reflects a meaningful real-world organizational structure. This data structure can then be used to submit the order to a point-of-sale system, for example, to complete your order.</p>
<p>Consider the following sample query:</p>
<a class="reference internal image-reference" href="../_images/parse_tree2.png"><img alt="../_images/parse_tree2.png" class="align-center" src="../_images/parse_tree2.png" style="width: 600px;" /></a>
<p>As illustrated, the language parser organizes detected entities into a collection of entity groups which comprise the parse tree. Each entity group has a main entity and possibly a collection of related child entities (or attributes) which further describe the parent entity. In linguistics, the main entity is called the <a class="reference external" href="https://en.wikipedia.org/wiki/Head_(linguistics)">Head</a> and the related entities are called <a class="reference external" href="https://en.wikipedia.org/wiki/Dependency_grammar">Dependents</a>.</p>
<p>The example query above contains three main pieces of information: the name of the store where the user wants to place an order, and the two products the user wants. This produces three entity groups, two with <code class="docutils literal notranslate"><span class="pre">product</span></code> entities as the head and one with a standalone <code class="docutils literal notranslate"><span class="pre">store_name</span></code> entity. The <code class="docutils literal notranslate"><span class="pre">product</span></code> entity has attributes like <code class="docutils literal notranslate"><span class="pre">quantity</span></code> and <code class="docutils literal notranslate"><span class="pre">size</span></code> that <a class="reference external" href="https://en.wikipedia.org/wiki/Grammatical_modifier">modify</a> it, and are therefore grouped together with the head as its dependents.</p>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Natural_language_parsing">Natural language parsing</a> is a long-studied problem in computer science and the approaches used depend on the end goal and the depth of linguistic analysis required. Methods range from simple ones like rule-based and regex-based parsing to more sophisticated techniques like <a class="reference external" href="http://spark-public.s3.amazonaws.com/nlp/slides/Parsing-Intro.pdf">syntactic parsing</a> and <a class="reference external" href="https://web.stanford.edu/class/cs224u/materials/cs224u-2016-intro-semparse.pdf">semantic parsing</a>. While parsing remains an active area of research, commercial applications like Siri, Cortana, Alexa, and Google Assistant rely on approaches that work well in practice and are easy to build, debug, and maintain. Such systems almost always leverage a good rule-based parser, optionally augmented by a statistical parser if enough human-annotated parsed data is available for training.</p>
<p>The language parser in MindMeld supports everything from the simplest rule-based systems to state-of-the-art syntactic and semantic parsers. Out of the box, MindMeld comes with a configuration-driven <a class="reference external" href="http://spark-public.s3.amazonaws.com/nlp/slides/Parsing-Dependency.pdf">dependency parser</a> (a kind of Syntactic Parser), similar to what's used in most commercial conversational applications today.</p>
<p>Getting started with the parser merely requires specifying a parser configuration which defines the entity hierarchy in your application. For the simple example above, the parser configuration can be defined as follows.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s1">&#39;product&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;quantity&#39;</span><span class="p">,</span> <span class="s1">&#39;size&#39;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>With the parser configuration in place, we train the NLP models and then test the parser, as follows.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> <span class="nv">$MM_APP_ROOT</span>
python
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindmeld.components.nlp</span> <span class="kn">import</span> <span class="n">NaturalLanguageProcessor</span>
<span class="n">nlp</span> <span class="o">=</span> <span class="n">NaturalLanguageProcessor</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="s1">&#39;Order one large squishee and a dozen donuts from the Elm Street Kwik-E-Mart.&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">{&#39;text&#39;: &#39;Order one large squishee and a dozen donuts from the Elm Street Kwik-E-Mart.&#39;,</span>
<span class="go"> &#39;domain&#39;: &#39;store_info&#39;,</span>
<span class="go"> &#39;intent&#39;: &#39;get_store_hours&#39;,</span>
<span class="go"> &#39;entities&#39;: [{&#39;text&#39;: &#39;Elm Street&#39;,</span>
<span class="go">   &#39;type&#39;: &#39;store_name&#39;,</span>
<span class="go">   &#39;role&#39;: None,</span>
<span class="go">   &#39;value&#39;: [{&#39;cname&#39;: &#39;23 Elm Street&#39;,</span>
<span class="go">     &#39;score&#39;: 44.777046,</span>
<span class="go">     &#39;top_synonym&#39;: &#39;Elm Street&#39;,</span>
<span class="go">     &#39;id&#39;: &#39;1&#39;},</span>
<span class="go">    {&#39;cname&#39;: &#39;104 First Street&#39;,</span>
<span class="go">     &#39;score&#39;: 7.0927515,</span>
<span class="go">     &#39;top_synonym&#39;: &#39;104 First Street&#39;,</span>
<span class="go">     &#39;id&#39;: &#39;5&#39;},</span>
<span class="go">    {&#39;cname&#39;: &#39;East Oak Street&#39;,</span>
<span class="go">     &#39;score&#39;: 7.0927515,</span>
<span class="go">     &#39;top_synonym&#39;: &#39;East Oak Street&#39;,</span>
<span class="go">     &#39;id&#39;: &#39;12&#39;},</span>
<span class="go">    {&#39;cname&#39;: &#39;257th Street&#39;,</span>
<span class="go">     &#39;score&#39;: 6.958622,</span>
<span class="go">     &#39;top_synonym&#39;: &#39;257th Street&#39;,</span>
<span class="go">     &#39;id&#39;: &#39;18&#39;},</span>
<span class="go">    {&#39;cname&#39;: &#39;D Street&#39;,</span>
<span class="go">     &#39;score&#39;: 6.7008686,</span>
<span class="go">     &#39;top_synonym&#39;: &#39;D Street&#39;,</span>
<span class="go">     &#39;id&#39;: &#39;19&#39;},</span>
<span class="go">    {&#39;cname&#39;: &#39;181st Street&#39;,</span>
<span class="go">     &#39;score&#39;: 6.630241,</span>
<span class="go">     &#39;top_synonym&#39;: &#39;181st Street&#39;,</span>
<span class="go">     &#39;id&#39;: &#39;17&#39;},</span>
<span class="go">    {&#39;cname&#39;: &#39;West Oak Street&#39;,</span>
<span class="go">     &#39;score&#39;: 6.249679,</span>
<span class="go">     &#39;top_synonym&#39;: &#39;West Oak Street&#39;,</span>
<span class="go">     &#39;id&#39;: &#39;11&#39;},</span>
<span class="go">    {&#39;cname&#39;: &#39;156th Street&#39;,</span>
<span class="go">     &#39;score&#39;: 6.1613703,</span>
<span class="go">     &#39;top_synonym&#39;: &#39;156th Street&#39;,</span>
<span class="go">     &#39;id&#39;: &#39;15&#39;},</span>
<span class="go">    {&#39;cname&#39;: &#39;Peanut Street&#39;,</span>
<span class="go">     &#39;score&#39;: 6.1613703,</span>
<span class="go">     &#39;top_synonym&#39;: &#39;Peanut Street&#39;,</span>
<span class="go">     &#39;id&#39;: &#39;20&#39;},</span>
<span class="go">    {&#39;cname&#39;: &#39;Little Italy Store&#39;,</span>
<span class="go">     &#39;score&#39;: 5.2708626,</span>
<span class="go">     &#39;top_synonym&#39;: &#39;Third Street&#39;,</span>
<span class="go">     &#39;id&#39;: &#39;7&#39;}],</span>
<span class="go">   &#39;span&#39;: {&#39;start&#39;: 53, &#39;end&#39;: 62}}]</span>
<span class="go"> }</span>
</pre></div>
</div>
<p>Some of the entities in the Natural Language Processor's output now include a <code class="docutils literal notranslate"><span class="pre">children</span></code> field that contains a list of all dependent entities related to that head entity.</p>
<p>The MindMeld language parser is a versatile component which can be used to implement a variety of parsing strategies for your application. The <a class="reference internal" href="../userguide/parser.html"><span class="doc">User Guide</span></a> explains the different options available to fine-tune the behavior of the parser, and covers how to define your own custom parsing logic and train a state-of-the-art statistical parser using annotated data.</p>
<p>Not every scenario warrants using the language parser. For instance, in our simple Kwik-E-Mart store information app, the two kinds of entities, <code class="docutils literal notranslate"><span class="pre">sys_time</span></code> and <code class="docutils literal notranslate"><span class="pre">store_name</span></code>, are distinct and unrelated pieces of information. Running the parser would only yield two singleton entity groups with heads but no dependents.</p>
<p>The parser matters when your application supports more complex natural language queries like the parse tree example discussed above. Once the language parser identifies the heads and their dependents, and links them together&nbsp;into logical units (entity groups), downstream components can use this information to determine appropriate actions and generate responses that fulfill the user's request.</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="09_optimize_question_answering_performance.html" class="btn btn-neutral float-right" title="Step 9: Optimize Question Answering Performance" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="07_train_the_natural_language_processing_classifiers.html" class="btn btn-neutral float-left" title="Step 7: Train the Natural Language Processing Classifiers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Cisco Systems

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>